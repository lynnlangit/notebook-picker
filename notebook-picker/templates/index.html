<!DOCTYPE html>
<html>
<head>
    <title>Vertex AI Configs</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <h1>GCP Managed Notebooks Configurations</h1>
    There are a number of configuration options for GCP Vertex AI Managed Notebooks.  They include the following:
    <ul>
        <li><b>Machine Type:</b> number of vCPUs and amount of memory</li>
        <li><b>GPU Type:</b> not required, but often used in ML workloads</li>
        <li><b>GPU Count:</b> options are from 1 to 8 GPUs, varies by GPU type</li>
        <li><b>Disk Size:</b> significant impact on cost</li>
        <li><b>Disk Type:</b> SSD or HDD</li>
        <li><b>Region:</b> impacts cost</li> 
      </ul>
    <hr>
    Shown below are three tables which list more information about key aspects of configuration.  They include the following:
    <ul>
        <li>the available GPU types for Vertex AI Managed Notebooks</li>
        <li>example machine configurations with GPUs</li>
        <li>example machine configurations without GPUs or base configurations</li>
    </ul>

    <table>
        <tr><table>
            <tr><h2>GPU Types</h2></tr>
            <tr><table class="table">
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Instance Family</th>
                  <th>Max # of GPUs</th>
                  <th>Usage</th>
                  <th>Max Cost/Hr</th>
                </tr>
              </thead>
              <tbody>
                {% for gpu_type in gpu_types %}
                  <tr>
                    <td>{{ gpu_type.name }}</td>
                    <td>{{ gpu_type.instance_family }}</td>
                    <td>{{ gpu_type.max_number_of_gpus }}</td>
                    <td>{{ gpu_type.usage }}</td>
                    <td>$ {{ gpu_type.max_cost_per_hour }}</td>
                  </tr>
                {% endfor %}
              </tbody>
            </table></tr>
    </table></tr>
        <tr><h2>Example GPU Machine Configurations</h2></tr>
        <tr><table class="table">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>vCPUs</th>
                    <th>Memory</th>
                    <th>GPUs</th>
                    <th>GPU Type</th>
                    <th>Cost/hr</th>
                </tr>
            </thead>
            <tbody>
                {% for row in gpu_rows %}
                    <tr>
                        <td>{{ row[0] }}</td>
                        <td>{{ row[1] }}</td>
                        <td>{{ row[2] }}</td>
                        <td>{{ row[3] }}</td>
                        <td>{{ row[4] }}</td>
                        <td>$ {{ row[5] }}</td>
                    </tr>
                {% endfor %}
            </tbody>
            </table></tr>
        <tr><h2>Base Machine Configurations</h2></tr>
        <tr><table class="table">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>vCPUs</th>
                    <th>Memory</th>
                    <th>Cost/hr</th>
                </tr>
            </thead>
            <tbody>
                {% for row in no_gpu_rows %}
                    <tr>
                        <td>{{ row[0] }}</td>
                        <td>{{ row[1] }}</td>
                        <td>{{ row[2] }}</td>
                        <td>$ {{ row[5] }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table></tr>
       
    </table>
        <br>
        <select name="machine_type" id="machine_type">
            {% for machine_type in machine_types %}
                <option value="{{ machine_type.name }}">{{ machine_type.name }}</option>
            {% endfor %}
            <script>
                document.getElementById("machine_type").selectedIndex = 0;
            </script>
        </select>
        <br>
        <button type="submit" name="submit" value="Submit" style="float: inline-end;">Submit</button>
        <br>
    <div id="selection_row">
        <script>
            function submit() {
              var machineType = document.getElementById("machine_type").value;
              var selectedRow = machineConfigurations.find(row => row.name === machineType);
              document.getElementById("selection_row").innerHTML = `
        <h2>Selected Row</h2>
        <table>
            <thead>
                <tr>
                    <th>Name</th>
                    <th>vCPUs</th>
                    <th>Memory</th>
                    <th>GPUs</th>
                    <th>GPU Type</th>
                    <th>Cost per hour</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>{{ selected_row.name }}</td>
                    <td>{{ selected_row.vcpus }}</td>
                    <td>{{ selected_row.memory }}</td>
                    <td>{{ selected_row.gpus }}</td>
                    <td>{{ selected_row.gpu_type }}</td>
                    <td>{{ selected_row.cost_per_hour }}</td>
                </tr>
            </tbody>
        </table>
        `;
        }
        </script>
    </div>
</body>
</html>
